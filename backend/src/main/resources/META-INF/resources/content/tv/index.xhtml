<?xml version="1.0" encoding="UTF-8"?>
<!-- Sources generated by springboot-scaffolding-maven-plugin  -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      class="grid"
>
	<h:head>
		<meta charset="utf-8"/>
		<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
		<meta content="width=device-width, initial-scale=1" name="viewport"/>
		<link href="#{request.contextPath}/assets/styles/gridstack.css" rel="stylesheet"/>
		<link href="#{request.contextPath}/assets/styles/gridstack-extra.min.css" rel="stylesheet"/>
		<link href="#{request.contextPath}/assets/styles/tv.css" rel="stylesheet"/>
	</h:head>

	<h:body styleClass="grid">
		<!--<ui:include src="css.xhtml"/>-->
		<div id="server-connection-error" class="retry" style="display: none">
			<i class="fa fa-exclamation-triangle"/>#{msg["app.tv.server.error"]}
			<span>.</span><span>.</span><span>.</span>
		</div>
		<c:choose>
			<c:when test="#{empty TvManagedBean.project}">
				<link href="#{request.contextPath}/assets/styles/vendor-72d47c3353.css" rel="stylesheet"/>
				<link href="#{request.contextPath}/assets/styles/auth-20116342ad.css" rel="stylesheet"/>
				<main class="auth-main">
					<div class="auth-block code-block">
						<h1>Screen code</h1>
						<div id="code">#{TvManagedBean.number}</div>
					</div>
				</main>
			</c:when>
			<c:otherwise>
				<div id="screen-code" style="display: none;">
					<div class="auth-block code-block top-code">
						<h1>Screen code</h1>
						<div id="code">#{TvManagedBean.number}</div>
					</div>
				</div>
				<h:form id="dashboard" styleClass="hidden">
					<h:commandButton style="display:none" id="myBtn" >
						<f:ajax render="@form"/>
					</h:commandButton>
					<input type="hidden"  name="#{_csrf.parameterName}" value="#{_csrf.token}"/>
					<style media="screen" type="text/css">
						#{TvManagedBean.project.cssStyle}
						<c:forEach var="widget" items="#{TvManagedBean.getWidgets()}">
						#{widget.css}
						</c:forEach>
						<c:forEach var="widget" items="#{TvManagedBean.getWidgets()}">
							<c:if test="#{not empty widget.customCss}">#{widget.customCss}</c:if>
						</c:forEach>
					</style>
					<div class="grid-stack grid-stack-#{TvManagedBean.project.maxColumn eq null ? 5 : TvManagedBean.project.maxColumn}" data-gs-animate="yes">
						<c:forEach var="widget" items="#{TvManagedBean.getWidgets()}">
							<div class="grid-stack-item" data-gs-x="#{widget.col}" data-gs-y="#{widget.row}" data-gs-width="#{widget.width}" data-gs-height="#{widget.height}">
								<div class="grid-stack-item-content widget #{widget.id} widget-#{widget.projectWidgetId}">
									<c:choose>
										<c:when test="${widget.error}">
											<div class="status-danger">
												<i class="fa fa-exclamation-triangle"/>#{msg['app.tv.widget.error']}
											</div>
										</c:when>
										<c:when test="${widget.warning}">
											<div class="status-warning">
												<i class="fa fa-exclamation-triangle"/>#{msg['app.tv.widget.warning']}
											</div>
										</c:when>
									</c:choose>
									<h:outputText value="#{widget.html}" escape="false"/>
								</div>
							</div>
						</c:forEach>
						<c:if test="#{empty TvManagedBean.getWidgets()}">
							<pre class="no-widget">#{msg['app.user.widget.dashboard.noWidget']}</pre>
						</c:if>
					</div>
				</h:form>
			</c:otherwise>
		</c:choose>

		<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
		<h:outputScript library="primefaces" name="jquery/jquery-plugins.js" target="head" />
		<script src="#{request.contextPath}/assets/js/lodash.js"/>
		<script src="#{request.contextPath}/assets/js/gridstack.js"/>
		<script src="#{request.contextPath}/assets/js/gridstack.jQueryUI.js"/>
		<script defer="defer" type="text/javascript" charset="UTF-8" src="#{request.contextPath}/assets/js/moment.locale.js"/>
		<script defer="defer" type="text/javascript" src="#{request.contextPath}/webjars/sockjs-client/sockjs.min.js"/>
		<script defer="defer" type="text/javascript" src="#{request.contextPath}/webjars/stomp-websocket/stomp.min.js"/>
		<script defer="defer" type="text/javascript" src="#{request.contextPath}/assets/js/tv.js?v1.0"/>
		<script id="error-template" type="text/template">
			<div class="status-danger">
				<i class="fa fa-exclamation-triangle"/>#{msg['app.tv.widget.error']}
			</div>
		</script>
		<script id="warning-template" type="text/template">
			<div class="status-warning">
				<i class="fa fa-exclamation-triangle"/>#{msg['app.tv.widget.warning']}
			</div>
		</script>
		<script type="text/javascript">
			var config = {
				grid_width: #{TvManagedBean.project.maxColumn eq null ? 5 : TvManagedBean.project.maxColumn},
				widget_height: #{TvManagedBean.project.widgetHeight eq null ? 360: TvManagedBean.project.widgetHeight},
				context_path: "#{request.contextPath}",
				token: "#{TvManagedBean.project.token}",
				number: "#{TvManagedBean.number}"
			};
        </script>
		<c:forEach var="token" items="#{TvManagedBean.librariesToken}">
			<script type="text/javascript" charset="UTF-8" src="#{request.contextPath}/api/asset/#{token}"/>
		</c:forEach>
	</h:body>
</html>