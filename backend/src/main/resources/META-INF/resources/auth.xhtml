<!-- Sources generated by springboot-scaffolding-maven-plugin  -->
<ui:composition
        template="template/simpleLayout.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
>
    <ui:define name="title">
        #{msg['app.auth.title']}
    </ui:define>
    <!-- Main auth page content -->
    <ui:define name="layout-content">
        <main class="auth-main">
            <div class="auth-block">
                <div class="logo"/>
                <c:choose>
                    <c:when test="#{param.error ne null}">
                        <div class="alert bg-danger">
                            #{msg["app.auth.error"]}<br />
                            #{sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
                            #{sessionScope["errorDetail"]}
                        </div>
                    </c:when>
                    <c:when test="#{sessionScope['errorDetail'] ne null}">
                        <div class="alert bg-danger">
                            #{msg[sessionScope["errorDetail"]]}
                        </div>
                    </c:when>
                </c:choose>
                <div class="loading text-center" style="display: none">
                    <i class="fa fa-circle-o-notch fa-spin fa-4x fa-fw"/>
                </div>
                <form class="form-horizontal" autocomplete="off" action="#{request.contextPath}/login" method="post">
                    <div class="form-group">
                        <div class="col-sm-12">
                            <input name="username" class="form-control" id="userInput" placeholder="#{msg['app.auth.login']}" type="text"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <input name="password" class="form-control" id="inputPassword" placeholder="#{msg['app.auth.password']}" type="password"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <button class="btn btn-default btn-auth" type="submit">#{msg['app.auth.signin']}</button>
                        </div>
                    </div>
                    <input type="hidden" name="#{_csrf.parameterName}"   value="#{_csrf.token}"/>
                </form>
                <script>
                    $(".auth-main form").submit(function () {
                        $(".loading").show()
                        $(".auth-main .alert, .auth-main form").hide();
                    });
                </script>
            </div>
            <div class="footer-legals">
                <div class="raw">
                    <div class="col-sm-4">#{msg['app.title']} - Version #{InfoManagedBean.getVersion()}</div>
                    <div class="col-sm-offset-3 col-sm-5 text-right">Copyright Â© <h:outputText value="#{now}"><f:convertDateTime pattern="yyyy" type="date" /></h:outputText> Suricate - All rights reserved</div>
                </div>
                <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
            </div>
        </main>
    </ui:define>
</ui:composition>